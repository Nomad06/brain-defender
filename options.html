<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="stylesheet" href="styles.css" />
  <title data-i18n="options.title">–°–ø–∏—Å–æ–∫ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏</title>
</head>
<body>
  <div class="container" style="max-width: 920px; margin: 0 auto;">
    <div class="card" style="padding: 16px;">
      <div class="row" style="justify-content: space-between; align-items: flex-start;">
        <div>
          <div class="h1" data-i18n="options.title">–°–∞–π—Ç—ã –≤ –±–ª–æ–∫-–ª–∏—Å—Ç–µ</div>
          <div class="h2" data-i18n="options.subtitle">–î–æ–±–∞–≤–ª—è–π –ª–µ–≥–∫–æ. –£–¥–∞–ª—è–π ‚Äî —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ –∏—Å–ø—ã—Ç–∞–Ω–∏–µ.</div>
        </div>
        <div class="row" style="gap: 12px; align-items: center;">
          <div class="kbd" id="count">0</div>
          <select id="languageSelect" class="btn" style="padding: 6px 10px; font-size: 12px;">
            <option value="ru" data-i18n="options.languageRu">–†—É—Å—Å–∫–∏–π</option>
            <option value="en" data-i18n="options.languageEn">English</option>
          </select>
        </div>
      </div>

      <div class="space"></div>

      <div class="card" style="padding: 16px; background: var(--card2);">
        <div class="h2" data-i18n="options.manualAdd">–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤—Ä—É—á–Ω—É—é</div>
        <div class="row">
          <input class="input" id="manualInput" data-i18n-placeholder="options.inputPlaceholder" placeholder="–Ω–∞–ø—Ä–∏–º–µ—Ä: youtube.com –∏–ª–∏ https://twitter.com" />
          <button class="btn primary" id="addManual" data-i18n="options.addButton">–î–æ–±–∞–≤–∏—Ç—å</button>
        </div>
        <div class="space"></div>
        <div class="row">
          <button class="btn" id="addCurrent" data-i18n="options.addCurrent">‚ûï –î–æ–±–∞–≤–∏—Ç—å —Ç–µ–∫—É—â–∏–π —Å–∞–π—Ç –æ–¥–Ω–∏–º –∫–ª–∏–∫–æ–º</button>
        </div>
        <div id="addSiteScheduleSection" style="display: none; margin-top: 16px; padding: 16px; background: var(--card); border-radius: 8px;">
          <label style="display: block; margin-bottom: 8px; font-weight: 500;">–†–µ–∂–∏–º –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏:</label>
          <select id="addSiteScheduleMode" class="input" style="width: 100%; margin-bottom: 12px;">
            <option value="always">–í—Å–µ–≥–¥–∞</option>
            <option value="workHours">–†–∞–±–æ—á–∏–µ —á–∞—Å—ã</option>
            <option value="weekends">–í—ã—Ö–æ–¥–Ω—ã–µ</option>
            <option value="custom">–ö–∞—Å—Ç–æ–º–Ω–æ–µ</option>
            <option value="vacation">–ö–∞–Ω–∏–∫—É–ª—ã (–æ—Ç–∫–ª—é—á–µ–Ω–æ)</option>
          </select>
          <div id="addSiteScheduleOptions" style="display: none;"></div>
          <div class="row" style="gap: 8px; margin-top: 12px;">
            <button class="btn" id="cancelAddSiteSchedule">–û—Ç–º–µ–Ω–∞</button>
            <button class="btn primary" id="confirmAddSiteWithSchedule">–î–æ–±–∞–≤–∏—Ç—å —Å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ–º</button>
          </div>
        </div>
        <div class="space"></div>
        <div class="muted" data-i18n="options.normalizationHint" data-i18n-params='{"www": "www."}'>–ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è: —É–±–∏—Ä–∞–µ–º <span class="kbd">www.</span>, –±–ª–æ–∫–∏—Ä—É–µ–º –¥–æ–º–µ–Ω + –≤—Å–µ –ø–æ–¥–¥–æ–º–µ–Ω—ã.</div>
      </div>

      <div class="space"></div>

      <!-- –í–∫–ª–∞–¥–∫–∏ -->
      <div class="row" style="gap: 8px; border-bottom: 1px solid var(--border); margin-bottom: 16px;">
        <button class="btn" id="tabSites" style="border-radius: 0; border-bottom: 2px solid var(--accent);">–°–∞–π—Ç—ã</button>
        <button class="btn" id="tabStats" style="border-radius: 0; border-bottom: 2px solid transparent;">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</button>
        <button class="btn" id="tabAchievements" style="border-radius: 0; border-bottom: 2px solid transparent;">–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</button>
      </div>

      <!-- –í–∫–ª–∞–¥–∫–∞ —Å–∞–π—Ç–æ–≤ -->
      <div id="sitesTab">
        <div class="row" style="justify-content: space-between; align-items: center; margin-bottom: 16px;">
          <div class="h2" data-i18n="options.currentList">–¢–µ–∫—É—â–∏–π —Å–ø–∏—Å–æ–∫</div>
          <div class="row" style="gap: 8px;">
            <select id="categoryFilter" class="btn" style="padding: 6px 10px; font-size: 12px;">
              <option value="all">–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</option>
            </select>
            <button class="btn" id="exportBtn">–≠–∫—Å–ø–æ—Ä—Ç</button>
            <button class="btn" id="importBtn">–ò–º–ø–æ—Ä—Ç</button>
          </div>
        </div>
        <input type="file" id="importFile" accept=".json" style="display: none;" />
        
        <!-- –ì—Ä—É–ø–ø–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ -->
        <div id="groupOperationsBar" class="card" style="padding: 12px; background: var(--card2); margin-bottom: 12px; display: none;">
          <div class="row" style="justify-content: space-between; align-items: center;">
            <div class="row" style="gap: 12px; align-items: center;">
              <span id="selectedCount" class="kbd">0 –≤—ã–±—Ä–∞–Ω–æ</span>
              <button class="btn" id="selectAllBtn" style="font-size: 12px; padding: 6px 12px;">–í—ã–±—Ä–∞—Ç—å –≤—Å–µ</button>
              <button class="btn" id="deselectAllBtn" style="font-size: 12px; padding: 6px 12px;">–°–Ω—è—Ç—å –≤—ã–¥–µ–ª–µ–Ω–∏–µ</button>
            </div>
            <div class="row" style="gap: 8px;">
              <button class="btn" id="bulkDeleteBtn" style="font-size: 12px; padding: 6px 12px;">–£–¥–∞–ª–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–µ</button>
              <button class="btn" id="bulkCategoryBtn" style="font-size: 12px; padding: 6px 12px;">–ò–∑–º–µ–Ω–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é</button>
              <button class="btn" id="bulkScheduleBtn" style="font-size: 12px; padding: 6px 12px;">–ò–∑–º–µ–Ω–∏—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ</button>
            </div>
          </div>
        </div>
        
        <!-- –ú–∞—Å—Å–æ–≤–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ -->
        <div class="card" style="padding: 16px; background: var(--card2); margin-bottom: 12px;">
          <div class="h2">–ú–∞—Å—Å–æ–≤–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ</div>
          <div class="space"></div>
          <textarea id="bulkAddInput" class="input" placeholder="–í–≤–µ–¥–∏—Ç–µ –¥–æ–º–µ–Ω—ã, –ø–æ –æ–¥–Ω–æ–º—É –Ω–∞ —Å—Ç—Ä–æ–∫—É&#10;–ù–∞–ø—Ä–∏–º–µ—Ä:&#10;youtube.com&#10;facebook.com&#10;twitter.com" style="min-height: 100px; font-family: var(--mono); font-size: 12px; resize: vertical;"></textarea>
          <div class="space"></div>
          <button class="btn primary" id="bulkAddBtn">–î–æ–±–∞–≤–∏—Ç—å –≤—Å–µ</button>
        </div>
        
        <div class="space"></div>
        <div class="list" id="list"></div>
      </div>

      <!-- –í–∫–ª–∞–¥–∫–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π -->
      <div id="achievementsTab" style="display: none;">
        <div class="card" style="padding: 16px; background: var(--card2);">
          <div class="h2">–í–∞—à–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è</div>
          <div class="space"></div>
          <div id="achievementsList"></div>
        </div>
      </div>

      <!-- –í–∫–ª–∞–¥–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ -->
      <div id="statsTab" style="display: none;">
        <div class="card" style="padding: 16px; background: var(--card2);">
          <div class="h2">–û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</div>
          <div class="space"></div>
          <div class="row" style="gap: 16px; flex-wrap: wrap;">
            <div class="card" style="padding: 16px; flex: 1; min-width: 150px;">
              <div class="muted">–í—Å–µ–≥–æ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫</div>
              <div class="h1" id="totalBlocks">0</div>
            </div>
            <div class="card" style="padding: 16px; flex: 1; min-width: 150px;">
              <div class="muted">–î–Ω–µ–π –ø–æ–¥—Ä—è–¥</div>
              <div class="h1" id="streakDays">0</div>
            </div>
            <div class="card" style="padding: 16px; flex: 1; min-width: 150px;">
              <div class="muted">–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–∞–π—Ç–æ–≤</div>
              <div class="h1" id="totalSites">0</div>
            </div>
          </div>
        </div>

        <div class="space"></div>

        <div class="h2">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Å–∞–π—Ç–∞–º</div>
        <div class="space"></div>
        <div id="statsBySite"></div>

        <div class="space"></div>

        <div class="row" style="gap: 8px;">
          <button class="btn" id="exportStatsBtn">–≠–∫—Å–ø–æ—Ä—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏</button>
          <button class="btn danger" id="clearStatsBtn">–û—á–∏—Å—Ç–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É</button>
        </div>
      </div>

      <div class="space"></div>
      
      <div class="card" style="padding: 16px; background: var(--card2);">
        <div class="h2">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</div>
        <div class="space"></div>
        <label class="row" style="align-items: center; gap: 8px; cursor: pointer;">
          <input type="checkbox" id="devMode" />
          <span>–†–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (—É–ø—Ä–æ—â–µ–Ω–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ)</span>
        </label>
        <div class="muted" style="font-size: 11px; margin-top: 4px;">
          –í —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Å–∞–π—Ç—ã –º–æ–∂–Ω–æ —É–¥–∞–ª—è—Ç—å –±–µ–∑ –∏—Å–ø—ã—Ç–∞–Ω–∏—è
        </div>
      </div>
      
      <div class="space"></div>
      <div class="muted" data-i18n="options.importantNote">
        –í–∞–∂–Ω–æ: —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏ —Ç—ã –≤—Å–µ–≥–¥–∞ –º–æ–∂–µ—à—å —É–¥–∞–ª–∏—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ü–µ–ª–∏–∫–æ–º —á–µ—Ä–µ–∑ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Chrome.
        –ó–¥–µ—Å—å –º—ã –¥–µ–ª–∞–µ–º —Ç–∞–∫, —á—Ç–æ–±—ã "—Å—Ç–µ—Ä–µ—Ç—å –æ–¥–∏–Ω —Å–∞–π—Ç –∏–∑ —Å–ø–∏—Å–∫–∞" –±—ã–ª–æ –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏ —Å–ª–æ–∂–Ω–æ.
      </div>
    </div>
  </div>

  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è -->
  <div id="scheduleModalBack" class="modalBack" style="display: none;">
    <div class="modal" style="max-width: 500px;">
      <div class="row" style="justify-content: space-between; align-items: center; margin-bottom: 16px;">
        <div class="h2" id="scheduleModalTitle">–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è</div>
        <button class="btn" id="closeScheduleModal" style="font-size: 20px; padding: 0; width: 32px; height: 32px;">√ó</button>
      </div>
      
      <div id="scheduleModalContent">
        <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –±—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
      </div>
      
      <div class="row" style="gap: 8px; margin-top: 16px; justify-content: flex-end;">
        <button class="btn" id="cancelScheduleBtn">–û—Ç–º–µ–Ω–∞</button>
        <button class="btn primary" id="saveScheduleBtn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
      </div>
    </div>
  </div>

  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —É—Å–ª–æ–≤–Ω—ã—Ö –ø—Ä–∞–≤–∏–ª -->
  <div id="conditionalRulesModalBack" class="modalBack" style="display: none;">
    <div class="modal" style="max-width: 600px;">
      <div class="row" style="justify-content: space-between; align-items: center; margin-bottom: 16px;">
        <div class="h2" id="conditionalRulesModalTitle">–£—Å–ª–æ–≤–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏</div>
        <button class="btn" id="closeConditionalRulesModal" style="font-size: 20px; padding: 0; width: 32px; height: 32px;">√ó</button>
      </div>
      
      <div id="conditionalRulesModalContent">
        <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –±—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
      </div>
      
      <div class="row" style="gap: 8px; margin-top: 16px; justify-content: flex-end;">
        <button class="btn" id="cancelConditionalRulesBtn">–û—Ç–º–µ–Ω–∞</button>
        <button class="btn primary" id="saveConditionalRulesBtn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
      </div>
    </div>
  </div>

  <!-- –ú–æ–¥–∞–ª–∫–∞ —Å–ª–æ–∂–Ω–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è -->
  <div class="modalBack" id="modalBack" role="dialog" aria-labelledby="modalSub" aria-modal="true">
    <div class="card modal" id="modal">
      <div class="row" style="justify-content: space-between;">
        <div>
          <div class="h1" data-i18n="options.deleteChallenge">–ò—Å–ø—ã—Ç–∞–Ω–∏–µ –Ω–∞ —É–¥–∞–ª–µ–Ω–∏–µ</div>
          <div class="h2" id="modalSub"><span data-i18n="options.deleting">–£–¥–∞–ª–µ–Ω–∏–µ:</span> <span class="kbd" id="targetHost"></span></div>
        </div>
        <button class="btn" id="closeModal" aria-label="–ó–∞–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ" title="–ó–∞–∫—Ä—ã—Ç—å (Escape)">‚úï</button>
      </div>

      <div class="space"></div>

      <div class="card" style="padding: 16px; background: var(--card2);">
        <div class="h2" data-i18n="options.step1Title">–®–∞–≥ 1 –∏–∑ 3 ‚Äî –ø–µ—Ä–µ–ø–µ—á–∞—Ç–∞–π –∫–æ–¥</div>
        <div class="space"></div>
        <div class="row">
          <!-- –±—ã–ª–æ: <div class="kbd" id="challengeCode"> -->
        <canvas id="challengeCanvas" width="320" height="42"
            style="width:320px; height:42px; border-radius:12px; border:1px solid rgba(255,255,255,.14); background: rgba(0,0,0,.25);"
            aria-label="–ö–æ–¥ –¥–ª—è –≤–≤–æ–¥–∞" role="img"></canvas>
          <button class="btn" id="regenCode" aria-label="–û–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥" title="–û–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥">üîÑ</button>
        </div>
        <div class="space"></div>
        <input class="input" id="codeInput" data-i18n-placeholder="options.codeInputPlaceholder" placeholder="–≤–≤–µ–¥–∏ –∫–æ–¥ —Ç–æ—á–Ω–æ" aria-label="–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è" aria-describedby="step1hint" />
        <div class="space"></div>
        <div class="muted" id="step1hint" role="status" aria-live="polite"></div>
      </div>

      <div class="space"></div>

      <div class="card" style="padding: 16px; background: var(--card2);">
        <div class="h2" data-i18n="options.step2Title">–®–∞–≥ 2 –∏–∑ 3 ‚Äî 3 –∑–∞–¥–∞—á–∫–∏</div>
        <div class="muted" data-i18n="options.step2Hint">–ù–µ–ª—å–∑—è "–ø—Ä–æ–∫–ª–∏–∫–∞—Ç—å". –û—à–∏–±–∫–∞ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç —à–∞–≥.</div>
        <div class="space"></div>
        <div id="mathBox" class="col" style="user-select:none; -webkit-user-select:none; -moz-user-select:none; -ms-user-select:none;"></div>
        <div class="space"></div>
        <button class="btn" id="checkMath" data-i18n="options.checkMath" aria-describedby="mathHint">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–¥–∞—á–∫–∏</button>
        <div class="space"></div>
        <div class="muted" id="mathHint" role="status" aria-live="polite"></div>
      </div>

      <div class="space"></div>

      <div class="card" style="padding: 16px; background: var(--card2);">
        <div class="h2" data-i18n="options.step3Title">–®–∞–≥ 3 –∏–∑ 3 ‚Äî —É–¥–µ—Ä–∂–∏–≤–∞–π –∫–Ω–æ–ø–∫—É 10 —Å–µ–∫—É–Ω–¥</div>
        <div class="muted" data-i18n="options.step3Hint">–û—Ç–ø—É—Å—Ç–∏–ª ‚Äî –ø—Ä–æ–≥—Ä–µ—Å—Å —Å–±—Ä–æ—à–µ–Ω. –î–∞, —Ç–∞–∫ –∏ –∑–∞–¥—É–º–∞–Ω–æ üôÇ</div>
        <div class="space"></div>
        <button class="btn danger" id="holdBtn" style="width: 100%; padding: 14px; font-weight: 800;" data-i18n="options.holdButton" aria-describedby="holdHint" aria-label="–£–¥–µ—Ä–∂–∏–≤–∞–π—Ç–µ –∫–Ω–æ–ø–∫—É 10 —Å–µ–∫—É–Ω–¥ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è">
          –£–î–ï–†–ñ–ò–í–ê–ô, –ï–°–õ–ò –¢–û–ß–ù–û –†–ï–®–ò–õ
        </button>
        <div class="space"></div>
        <div class="progressWrap" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" aria-label="–ü—Ä–æ–≥—Ä–µ—Å—Å —É–¥–µ—Ä–∂–∞–Ω–∏—è –∫–Ω–æ–ø–∫–∏"><div class="progressBar" id="holdBar"></div></div>
        <div class="space"></div>
        <div class="muted" id="holdHint" role="status" aria-live="polite"></div>
      </div>

      <div class="space"></div>

      <div class="row" style="justify-content: flex-end;">
        <button class="btn danger" id="confirmDelete" disabled data-i18n="options.confirmDelete" aria-label="–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å —É–¥–∞–ª–µ–Ω–∏–µ —Å–∞–π—Ç–∞ –∏–∑ —Å–ø–∏—Å–∫–∞">–£–¥–∞–ª–∏—Ç—å —Å–∞–π—Ç –∏–∑ —Å–ø–∏—Å–∫–∞</button>
      </div>
    </div>
  </div>

  <script src="consts.js"></script>
  <script src="utils.js"></script>
  <script src="translations.js"></script>
  <script src="i18n.js"></script>
  <script src="stats.js"></script>
  <script src="achievements.js"></script>
  <script src="schedule.js"></script>
  <script src="conditional_rules.js"></script>
  <script src="categories.js"></script>
  <script src="migration.js"></script>
  <script src="options.js"></script>
</body>
</html>